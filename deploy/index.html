<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-label="pageTitle">Генератор Списка Поддерживающих на Boosty</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nunjucks@3.2.4/browser/nunjucks.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

   <!-- Application Labels -->
   <script src="js/labels.js"></script>
  <!-- Application Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container-fluid py-4">
    <!-- Header -->
    <div class="row mb-4">
      <div class="col-12 text-center">
        <h1 class="display-5 fw-bold text-primary mb-2" data-label="mainHeading">Генератор Списка Поддерживающих на Boosty</h1>
        <p class="lead text-muted" data-label="description">Загрузите CSV и сгенерируйте списки поддерживающих</p>
      </div>
    </div>

    <!-- File Upload Section -->
    <div class="row mb-4">
      <div class="col-lg-8 mx-auto">
        <div id="dropzone" class="dropzone p-5 text-center border border-2 border-dashed rounded">
          <div id="dropzone-content">
            <i class="bi bi-file-earmark-arrow-up display-1 text-muted mb-3"></i>
            <h4 class="mb-3" data-label="dragDropText">Перетащите CSV файл сюда</h4>
            <p class="text-muted mb-3" data-label="orText">или</p>
            <button id="file-input-btn" class="btn btn-primary btn-lg">
              <i class="bi bi-folder2-open me-2"></i><span data-label="chooseFileButton">Выбрать файл</span>
            </button>
            <input type="file" id="file-input" accept=".csv" class="d-none">
          </div>
          <div id="file-info" class="d-none">
            <i class="bi bi-file-earmark-check display-4 text-success mb-3"></i>
            <h5 id="file-name"></h5>
            <p class="text-muted mb-3" id="file-size"></p>
            <button id="process-btn" class="btn btn-success btn-lg">
              <i class="bi bi-play-circle me-2"></i><span data-label="processFileButton">Обработать файл</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Processing Status -->
    <div id="processing-status" class="row mb-4 d-none">
      <div class="col-lg-6 mx-auto">
        <div class="card">
          <div class="card-body text-center">
            <div class="spinner-border text-primary mb-3" role="status">
              <span class="visually-hidden" data-label="processing">Обработка...</span>
            </div>
            <h5 id="status-text" data-label="processingCsvFile">Обработка CSV файла...</h5>
            <div class="progress mt-3">
              <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated"
                   role="progressbar" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div id="settings-section" class="row mb-4">
      <div class="col-lg-6 mx-auto">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-gear me-2"></i><span data-label="settingsTitle">Настройки</span>
            </h5>

            <!-- HTML Page Settings Subsection -->
            <div class="mb-4">
              <h6 class="mb-3">
                <i class="bi bi-filetype-html me-2"></i>Настройки HTML страницы
              </h6>
              <div class="mb-3">
                <label for="title-input" class="form-label">
                  <span>Текст заголовка</span>
                  <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Текст, отображаемый в верхней части HTML страницы с поддерживающими."></i>
                </label>
                <input type="text" class="form-control" id="title-input" placeholder="Спасибо!">
                <div class="form-text">По умолчанию: Спасибо!</div>
              </div>
              <div class="mb-3">
                <label for="padding-input" class="form-label">
                  <span data-label="paddingLinesLabel">Строки отступа</span>
                  <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" data-label="paddingLinesTooltip" title="Количество пустых строк, добавляемых до и после списка поддерживающих в HTML выводе. Это контролирует расстояние в прокручивающихся титрах."></i>
                </label>
                <input type="number" class="form-control" id="padding-input" min="0" max="200" step="1" placeholder="0">
                <div class="form-text" data-label="paddingDefaultText">По умолчанию: 0 (без отступа). Более высокие значения добавляют больше места до и после содержимого на HTML странице.</div>
              </div>
              <div class="mb-3">
                <label for="animation-duration-input" class="form-label">
                  <span>Длительность анимации (секунды)</span>
                  <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Длительность прокрутки титров в HTML файле."></i>
                </label>
                <input type="number" class="form-control" id="animation-duration-input" min="1" max="300" step="1" placeholder="30">
                <div class="form-text">По умолчанию: 30 секунд. Диапазон: 1-300 секунд.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div id="results-section" class="row d-none">
      <div class="col-12">
        <h3 class="text-center mb-4" data-label="generatedFilesTitle">Сгенерированные файлы</h3>
        <div class="row g-4" id="file-cards">
          <!-- File cards will be inserted here -->
        </div>
        <div class="text-center mt-4">
          <button id="download-all-btn" class="btn btn-primary btn-lg">
            <i class="bi bi-download me-2"></i><span data-label="downloadAllAsZip">Скачать все как ZIP</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Error Container -->
    <div id="error-container" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
      <!-- Error alerts will be inserted here -->
    </div>

    <!-- Footer -->
    <div class="row mt-5">
      <div class="col-12 text-center">
        <p class="text-muted"><span data-label="authorText">Автор: Сурен Хоренян | </span><a href="https://github.com/mahenzon/render-boosty-supporters" target="_blank"><span data-label="sourceCodeText">Исходный код на GitHub</span></a></p>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Application Scripts -->
  <script src="js/templates.js"></script>
  <script src="js/dataProcessor.js"></script>
  <script src="js/uiManager.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
